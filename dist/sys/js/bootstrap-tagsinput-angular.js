angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",[function(){function g(a,f){return f?angular.isFunction(a.$parent[f])?a.$parent[f]:function(a){return a[f]}:void 0}return{restrict:"EA",scope:{model:"\x3dngModel"},template:"\x3cselect multiple\x3e\x3c/select\x3e",replace:!1,link:function(a,f,c){$(function(){angular.isArray(a.model)||(a.model=[]);var e=$("select",f),b=c.typeaheadSource?c.typeaheadSource.split("."):null,b=b?1<b.length?a.$parent[b[0]][b[1]]:a.$parent[b[0]]:null;
e.tagsinput(a.$parent[c.options||""]||{typeahead:{source:angular.isFunction(b)?b:null},itemValue:g(a,c.itemvalue),itemText:g(a,c.itemtext),confirmKeys:g(a,c.confirmkeys)?JSON.parse(c.confirmkeys):[13],tagClass:angular.isFunction(a.$parent[c.tagclass])?a.$parent[c.tagclass]:function(a){return c.tagclass}});for(b=0;b<a.model.length;b++)e.tagsinput("add",a.model[b]);e.on("itemAdded",function(b){-1===a.model.indexOf(b.item)&&a.model.push(b.item)});e.on("itemRemoved",function(b){b=a.model.indexOf(b.item);
-1!==b&&a.model.splice(b,1)});var h=a.model.slice();a.$watch("model",function(){var b=a.model.filter(function(a){return-1===h.indexOf(a)}),c=h.filter(function(b){return-1===a.model.indexOf(b)}),d;h=a.model.slice();for(d=0;d<c.length;d++)e.tagsinput("remove",c[d]);e.tagsinput("refresh");for(d=0;d<b.length;d++)e.tagsinput("add",b[d])},!0)})}}}]);